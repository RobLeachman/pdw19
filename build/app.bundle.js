webpackJsonp([0],{1461:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.BootGame=void 0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=i(31);e.BootGame=function(t){function e(){return s(this,e),n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"BootGame"))}return a(e,t),o(e,[{key:"preload",value:function(){this.load.multiatlas("bigBackground","assets/graphics/pdw1A@"+r.assetsDPR+".json","assets/graphics"),this.load.bitmapFont("gameplay-black","assets/fonts/gameplay-1987-black.png","assets/fonts/gameplay-1987-bw.fnt"),this.load.bitmapFont("gameplay-white","assets/fonts/gameplay-1987-white.png","assets/fonts/gameplay-1987-bw.fnt"),this.load.audio("testNoise","assets/sound/41525__Jamius__BigLaser_trimmed.wav")}},{key:"create",value:function(){this.scene.start("TestScene")}}]),e}(Phaser.Scene)},1462:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PlayGame=void 0;var r,u,h=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=i(31),f=i(33),c=s(f),p=i(83),d=s(p),g=i(62),y=i(538),b=s(y),m=i(1463),v=s(m),P=i(1464),w=s(P),k=i(1465),O=s(k),x=i(1466),T=s(x),_=i(1467),S=s(_),D=i(1468),B=s(D),R=i(1469),C=s(R),L=i(1470),A=s(L),N=i(1471),M=s(N),E=i(1472),j=s(E),G={x:0,y:0},H=[],I=[],F=!1,Y=!0,U=0,X={x:0,y:0},W=!1,K=0,V=!0,z=0,$=0;e.PlayGame=function(t){function e(){return n(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"PlayGame"))}return o(e,t),h(e,[{key:"create",value:function(){this.theShield=new Phaser.GameObjects.Rectangle(this,200,200,300,300,255,1),this.add.text(50*l.assetsDPR,330*l.assetsDPR,"assetsDPR: "+l.assetsDPR,{font:"18px Verdana"}),this.add.text(50*l.assetsDPR,350*l.assetsDPR,"WIDTH: "+l.WIDTH,{font:"12px Verdana"}),this.add.text(150*l.assetsDPR,350*l.assetsDPR,"HEIGHT: "+l.HEIGHT,{font:"12px Verdana"}),this.cameras.main.setZoom(1.5),this.cameras.main.setScroll(-100*l.assetsDPR,-72*l.assetsDPR);for(var t=0;t<9;t++)if(0==t){var e=new T.default(this,t);H.push(e)}else if(4==t){var i=new v.default(this,"base",t);H.push(i)}else if(8==t){var s=new O.default(this,"gasFactoryPad",t);H.push(s)}else if(1==t){var n=new w.default(this,"generator",t);H.push(n)}else{var a=new w.default(this,"pad",t);H.push(a)}var o=new S.default(this,"market",9);H.push(o),this.shields=new B.default(this,"shields",10),H.push(this.shields),this.laser=new C.default(this,"laser",11),H.push(this.laser),n.regenerate(!0),this.instructions(),new c.default(this,0,0,"bigBackground","road4").setOrigin(0,0),this.homeBlock=this.add.rectangle(300*l.assetsDPR,350*l.assetsDPR,329*l.assetsDPR,10*l.assetsDPR,16711680).setOrigin(0,0),this.homeBlock.setAlpha(0),this.physics.add.existing(this.homeBlock,!0);var r=new Phaser.Geom.Point(G.x,G.y);this.man=new b.default(this,r),this.bombCount=0,this.bombList=[],this.mother=new A.default(this),this.motherTimer=0,this.input.keyboard.on("keyup",this.handleKey,this),this.input.on("pointerup",this.handleSwipe,this),this.input.on("pointerdown",this.handleMashing,this),this.testNoise=this.sound.add("testNoise");this.time.now}},{key:"update",value:function(t,e){if($++,W)return z++>50&&(0,g.deathCrater)(this,r,u),z++>100&&this.add.bitmapText(r-100,u-80,"gameplay-white","RELOAD?",10*l.assetsDPR).setDepth(Number.MAX_VALUE),250==z&&this.cameras.main.fade(2e3),void(z>2e3&&this.scene.stop());try{if(this.man.isMoving())this.man.doMove(this.loopCount,e);else if(this.man.getBuffer()>-1){if(this.man.getBuffer()==d.default.INTERACT){var i=(0,g.getSpotAtLocation)(this.man.location);null!==i&&H[i].interact(this.man,I)}else this.makeMove(this.man.getBuffer());this.man.clearBuffer()}for(var s=0;s<I.length;s++)if(I[s].isResting())for(var n=0;n<H.length;n++)H[n]instanceof w.default&&H[n].isReadyToCollect()&&(H[n].collectionPending(),I[s].getThing(n));for(var s=0;s<I.length;s++){var a=I[s].act(H,$,e);a.affected>0&&H[a.affected].doAction(a.affect)}if(this.shields.update(),this.mother.isMoving()||++this.motherTimer>20&&U<1&&(this.fighter=new M.default(this),U=1),this.motherTimer>1e3&&(!Y||this.motherTimer>800)&&(K++>3&&this.bombList.length<1&&(this.bomb=new j.default(this,this.shields,this.homeBlock,this.bombCount,this.cameras.main),this.bombCount++,this.bombList.push(this.bomb)),200*this.bombList.length+3<K&&V&&(this.bomb=new j.default(this,this.shields,this.homeBlock,this.bombCount,this.cameras.main),this.bombCount++,this.bombList.push(this.bomb))),this.laser.shoot(X.x,X.y),this.laser.isShooting){var o=this.laser.lockTarget(this.mother,this.fighter,this.bombList),h=1;null!=o?(o instanceof M.default&&(V=!1),h=o.getShot()):console.log("miss"),h<0&&(this.testNoise.play(),this.laser.victory())}for(var s=0;s<this.bombList.length;s++)2==this.bombList[s].status&&(W=!0,r=this.bombList[s].sprite.x,u=this.bombList[s].sprite.y,this.cameras.main.flash(500,16777215),this.cameras.main.pan(this.bombList[s].sprite.x,this.bombList[s].sprite.y,1400,"Linear"),this.cameras.main.zoomTo(5,1400))}catch(t){if(F)throw"the wheels, they have come off the wagon again";console.log("ERROR "+t),console.log("STACK "+t.stack),F=!0,this.cameras.main.setZoom(1),this.cameras.main.setScroll(0,0);var f=this.add.graphics();f.fillStyle(255,1);var c=new Phaser.Geom.Rectangle(0,0,l.WIDTH,l.HEIGHT);f.fillRectShape(c),this.add.text(0,40,t).setFontSize(10*l.assetsDPR).setResolution(24e3),this.add.text(0,120,"RATFARTS").setFontSize(10*l.assetsDPR).setResolution(24e3),this.add.text(0,200,t.stack).setFontSize(10*l.assetsDPR).setResolution(24e3)}}},{key:"makeMove",value:function(t){Y&&5==this.man.location.x&&2==this.man.location.y&&this.man.moveBuffer==d.default.DOWN&&(Y=!1,this.cameras.main.pan(1250,950,700,"Linear"),this.cameras.main.zoomTo(1,700),this.instructions.setAlpha(0),this.px=this.shields.paintShieldBars(100)),this.man.moveBuffer>-1&&this.man.tryMove()}},{key:"handleKey",value:function(t){this.time.now;switch(t.code){case"KeyA":case"ArrowLeft":this.man.setBuffer(d.default.LEFT);break;case"KeyD":case"ArrowRight":this.man.setBuffer(d.default.RIGHT);break;case"KeyW":case"ArrowUp":this.man.setBuffer(d.default.UP);break;case"KeyS":case"ArrowDown":this.man.setBuffer(d.default.DOWN);break;case"Space":this.man.setBuffer(d.default.INTERACT);break;case"Digit0":this.man.isNowCarrying(d.default.NOTHING);break;case"Digit1":this.man.isNowCarrying(d.default.THING);break;case"Digit2":this.man.isNowCarrying(d.default.GAS);break;case"Digit4":this.cameras.main.shake(50,.01),this.shields.hit();break;case"Digit5":this.bomb=new j.default(this,this.shields,this.homeBlock,this.bombCount),this.bombCount++,this.bombList.push(this.bomb)}}},{key:"handleMashing",value:function(t){t.downX>330*l.assetsDPR&&t.downY<360*l.assetsDPR&&(X.x=t.downX,X.y=t.downY)}},{key:"handleSwipe",value:function(t){var e=t.upTime-t.downTime,i=e<d.default.swipeMaxTime,s=new Phaser.Geom.Point(t.upX-t.downX,t.upY-t.downY);Phaser.Geom.Point.GetMagnitude(s)>d.default.swipeMinDistance&&i?(Phaser.Geom.Point.SetMagnitude(s,1),s.x>d.default.swipeMinNormal&&this.man.setBuffer(d.default.RIGHT),s.x<-d.default.swipeMinNormal&&this.man.setBuffer(d.default.LEFT),s.y>d.default.swipeMinNormal&&this.man.setBuffer(d.default.DOWN),s.y<-d.default.swipeMinNormal&&this.man.setBuffer(d.default.UP)):t.downX>330*l.assetsDPR&&t.downY<360*l.assetsDPR?X.x=-1:this.man.setBuffer(d.default.INTERACT)}},{key:"instructions",value:function(){this.text="HEY FIRST, THANKS FOR\nPLAYING MY GAME!\n\nSEE THE BLUE\nGENERATOR WITH\nTHE GREEN THING?\nGO GET IT!\n\nHIT W-A-S-D\nAND SPACEBAR\nOR SWIPE AND TAP.\n\nUSE THE THING TO\nBUILD, BUY GAS\nAND ROBOTS.\n\n$50K WINS THE\nGAME.\n\nYOU'RE AWESOME,\nHAVE FUN AND\nTRY NOT TO DIE!",this.instructions=this.add.bitmapText(320*l.assetsDPR,10*l.assetsDPR,"gameplay-white",this.text,10*l.assetsDPR)}}]),e}(Phaser.Scene)},1463:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),u=i(83),h=s(u),l=i(33),f=s(l),c=i(62),p=i(261),d=s(p),g=function(t){function e(t,i,s){n(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));o.game=t,o.spriteName=i,o.spot=s,o.botCount=0,o.fuelBay=[0,0,0],o.drawFuelBays(),o.botsAvailable=10,o.botList=[],o.botsResting=0;for(var r=0;r<o.botsAvailable/2;r++){var u={x:(0,c.getLocationX)(o.spot)+4+12.5*r,y:(0,c.getLocationY)(o.spot)+53,sprite:new f.default(o.game,(0,c.getLocationX)(o.spot)+4+12.5*r,(0,c.getLocationY)(o.spot)+53,"bigBackground","botCounter").setOrigin(0,0),available:!1};u.sprite.setAlpha(0),o.botList.push(u)}for(var r=0;r<o.botsAvailable/2;r++)u={x:(0,c.getLocationX)(o.spot)+4+12.5*r,y:(0,c.getLocationY)(o.spot)+56,sprite:new f.default(o.game,(0,c.getLocationX)(o.spot)+4+12.5*r,(0,c.getLocationY)(o.spot)+56,"bigBackground","botCounter").setOrigin(0,0),available:!1},u.sprite.setAlpha(0),o.botList.push(u);return o}return o(e,t),r(e,[{key:"interact",value:function(t){t.isCarrying()==h.default.NOTHING?this.takeStuff()&&t.isNowCarrying(h.default.THING):t.isCarrying()==h.default.THING&&this.stashStuff()&&t.isNowCarrying(h.default.NOTHING)}},{key:"doAction",value:function(t){var e,i;switch(t){case h.default.DO_RESTBOT:this.botSleeping();break;case h.default.DO_PUTSTUFF:this.botSleeping(),this.stashStuff();break;case h.default.DO_DISPATCH:this.botDispatch();break;case h.default.DO_TAKESTUFF:this.takeStuff(),e=new Phaser.Geom.Rectangle(this.sprite.x+5+7*this.botCount,this.sprite.y+20,5,2),i=this.game.add.graphics({fillStyle:{color:16777215}}),i.fillRectShape(e),this.botCount--}}},{key:"botSleeping",value:function(){var t=this.botList.findIndex(function(t){return!t.available});if(!(0<=t))throw"There is no spot to sleep, impossible!";this.botList[t].sprite.setAlpha(1),this.botList[t].available=!0}},{key:"botDispatch",value:function(){var t=this.botList.findIndex(function(t){return t.available});if(!(0<=t))throw"There is no bot, impossible!";this.botList[t].sprite.setAlpha(0),this.botList[t].available=!1}},{key:"takeStuff",value:function(){for(var t=0;t<3;t++)if(this.fuelBay[t]>0)return this.fuelBay[t]=0,this.drawFuelBays(),!0;return!1}},{key:"stashStuff",value:function(){for(var t=0;t<3;t++)if(0==this.fuelBay[t])return this.fuelBay[t]=10,this.drawFuelBays(),!0;return!1}}]),e}(d.default);e.default=g},1464:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=i(83),r=s(o),u=i(31),h=i(33),l=s(h),f=i(62),c=0,p=30,d=function(){function t(e,i,s){n(this,t),this.game=e,this.spriteName=i,this.spot=s,this.sprite=new l.default(this.game,(0,f.getLocationX)(this.spot),(0,f.getLocationY)(this.spot),"bigBackground",i).setOrigin(0,0),this.state=c,this.collectPending=!1,this.genSprite=new l.default(this.game,this.sprite.x/u.assetsDPR+36,this.sprite.y/u.assetsDPR+40,"bigBackground","generating/1"),this.genSprite.alpha=0;var a=this.game.anims.generateFrameNames("bigBackground",{start:14,end:1,prefix:"generating/"});this.game.anims.create({key:"generateStuff",frames:a,frameRate:p})}return a(t,[{key:"interact",value:function(t){this.state==c?t.isCarrying()==r.default.THING&&(this.sprite.setFrame("generator").setOrigin(0,0),t.isNowCarrying(r.default.NOTHING),this.regenerate(!0)):2==this.state&&t.isCarrying()==r.default.NOTHING&&(t.isNowCarrying(r.default.THING),this.regenerate(!1)),t.isCarrying()==r.default.GAS&&this.fuel<3&&(t.isNowCarrying(r.default.NOTHING),this.fuel=3,3==this.state?this.regenerate(!1):this.gauge=new l.default(this.game,this.sprite.x/u.assetsDPR+36,this.sprite.y/u.assetsDPR+22,"bigBackground","gauge/gauge"+this.fuel))}},{key:"doAction",value:function(t){switch(t){case r.default.DO_TAKESTUFF:this.collectionCompleted(),this.regenerate(!1)}}},{key:"regenerate",value:function(t){this.genSprite.alpha=0,t?(this.makeThing(),this.fuel=3,this.gauge=new l.default(this.game,this.sprite.x/u.assetsDPR+36,this.sprite.y/u.assetsDPR+22,"bigBackground","gauge/gauge"+this.fuel)):this.fuel>0?(this.makeThing(),this.fuel--):this.state=3,this.gauge.setFrame("gauge/gauge"+this.fuel)}},{key:"makeThing",value:function(){this.state=1,this.genSprite.alpha=1,this.genSprite.anims.play("generateStuff"),this.genSprite.on("animationcomplete",function(){this.state=2},this)}},{key:"isReadyToCollect",value:function(){return 2==this.state&&!this.collectPending}},{key:"collectionPending",value:function(){this.collectPending=!0}},{key:"collectionCompleted",value:function(){this.collectPending=!1}},{key:"needsGas",value:function(){return 3==this.state}}]),t}();e.default=d},1465:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=i(83),r=s(o),u=i(33),h=s(u),l=i(62),f=function(){function t(e,i,s){n(this,t),this.game=e,this.spot=s,this.spriteName=i,this.sprite=new h.default(this.game,(0,l.getLocationX)(this.spot),(0,l.getLocationY)(this.spot),"bigBackground",i).setOrigin(0,0)}return a(t,[{key:"interact",value:function(t){t.isCarrying(r.default.THING)&&(this.built?t.isNowCarrying(r.default.GAS):(this.build(),t.isNowCarrying(r.default.NOTHING)))}},{key:"build",value:function(){this.sprite.setFrame("gasFactory").setOrigin(0,0),this.built=!0}}]),t}();e.default=f},1466:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=i(33),r=s(o),u=i(62),h=i(540),l=s(h),f=function(){function t(e,i){n(this,t),this.game=e,this.spot=i,this.sprite=new r.default(this.game,(0,u.getLocationX)(this.spot),(0,u.getLocationY)(this.spot),"bigBackground","botFactoryPad").setOrigin(0,0),this.built=!1,this.botsAvailable=10,this.botList=[];for(var s=0;s<this.botsAvailable/2;s++){var a={x:(0,u.getLocationX)(this.spot)+4+12.5*s,y:(0,u.getLocationY)(this.spot)+53,sprite:new r.default(this.game,(0,u.getLocationX)(this.spot)+4+12.5*s,(0,u.getLocationY)(this.spot)+53,"bigBackground","botCounter").setOrigin(0,0)};a.sprite.setAlpha(0),this.botList.push(a)}for(var s=0;s<this.botsAvailable/2;s++)a={x:(0,u.getLocationX)(this.spot)+4+12.5*s,y:(0,u.getLocationY)(this.spot)+56,sprite:new r.default(this.game,(0,u.getLocationX)(this.spot)+4+12.5*s,(0,u.getLocationY)(this.spot)+56,"bigBackground","botCounter").setOrigin(0,0)},a.sprite.setAlpha(0),this.botList.push(a)}return a(t,[{key:"interact",value:function(t,e){if(t.hasThing())if(this.built){if(e.length<10){t.nowHasNothing(),this.botsAvailable--,this.botList[e.length].sprite.setAlpha(0);var i=new l.default(this.game);e.push(i)}}else this.build(),t.nowHasNothing()}},{key:"build",value:function(){this.sprite.setFrame("botFactory").setOrigin(0,0);for(var t=0;t<this.botList.length;t++)this.botList[t].sprite.setAlpha(1);this.built=!0}}]),t}();e.default=f},1467:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=i(539),u=function(t){return t&&t.__esModule?t:{default:t}}(r),h=i(31),l=function(t){function e(t,i,a){s(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a));return o.score=0,o.displayScore=o.game.add.bitmapText(325*h.assetsDPR,416*h.assetsDPR,"gameplay-black","$0",10*h.assetsDPR),o.displayScore.setAlpha(0),o}return a(e,t),o(e,[{key:"interact",value:function(t){t.hasThing()&&(t.nowHasNothing(),this.score+=1e3,this.displayScore.setAlpha(1),this.displayScore.setText("$"+this.score))}},{key:"getScore",value:function(){return this.score}}]),e}(u.default);e.default=l},1468:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=i(261),u=function(t){return t&&t.__esModule?t:{default:t}}(r),h=i(31),l=function(t){function e(t,i,a){s(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a));o.built=!0,o.shieldBody=o.game.add.rectangle(0,310*h.assetsDPR,2270*h.assetsDPR,20*h.assetsDPR,65280).setOrigin(0,0),o.shieldBody.setAlpha(0),o.game.physics.add.existing(o.shieldBody,!1),o.shieldBody.body.immovable=!0,o.shieldBody.body.allowGravity=!1,o.level=100;o.paintShieldBars(o.level);return o.oldLevel=o.level,o.chargeLevel=100,o.chargeRate=220,o.chargeCount=0,o}return a(e,t),o(e,[{key:"getBlock",value:function(){return this.shieldBody}},{key:"update",value:function(){return}},{key:"hit",value:function(){this.level=this.level-15,this.level<0&&(this.level=0);var t=this.paintShieldBars(this.level);t>0&&this.shieldBody.setY(4*t)}},{key:"doAction",value:function(t){3==t&&(this.upgrades++,this.drawUpgrades())}},{key:"upgrade",value:function(){this.upgrades++,this.upgradeSprite.setFrame("upgrades/"+this.upgrades).setOrigin(0,0),this.chargeLevel+=10}},{key:"paintShieldBars",value:function(){if(this.level==this.oldLevel)return-1;this.oldLevel=this.level;var t=this.level;if(void 0!==this.shieldPix&&this.shieldPix.destroy(),t<1)return void this.shieldBody.setY(360*h.assetsDPR);for(var e=[],i=t,s=0,n=0,a=0;a<10;a++){var o=Math.max(0,Math.min(10,t-10*a));o>0&&n++,i-=o;var r=o+i;e.push(r),s+=r}var u=[],l=0;for(a=0;a<10;a++){var f=Math.round(t*e[a]/s,0);u.push(f),l+=f}u[0]+=t-l;var c=150,p=0,d=this.game.add.graphics({x:0,y:0});for(a=0;a<10;a++){var g=(t-10*a)/10;if(g>1&&(g=1),g>0){var y=c-u[a]+1;d.fillStyle(this.fullColorHex(15*(9-a),25*a*(10/n),255),g),d.fillRect(318*h.assetsDPR,(.5*y+280)*h.assetsDPR,298*h.assetsDPR,.5*u[a]*h.assetsDPR),p+=.5*u[a],c=y-1}}d.closePath(),this.shieldPix=d;var b=(.5*y+280)*h.assetsDPR;this.shieldBody.setY(b)}},{key:"colorToHex",value:function(t){var e=Number(Math.round(t)).toString(16);return e.length<2&&(e="0"+e),e}},{key:"fullColorHex",value:function(t,e,i){var s=this.colorToHex(t),n=this.colorToHex(e),a=this.colorToHex(i);return parseInt(s+n+a,16)}}]),e}(u.default);e.default=l},1469:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=i(261),u=function(t){return t&&t.__esModule?t:{default:t}}(r),h=i(31),l=function(t){function e(t,i,a){s(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,a));return o.built=!0,o.isShooting=!1,o.heat=0,o}return a(e,t),o(e,[{key:"shoot",value:function(t,e){t>0?(this.heat>50?this.isShooting=!1:this.isShooting||(this.isShooting=!0,this.targetX=t,this.targetY=e,this.line=this.game.add.line(0,0,580*h.assetsDPR,367*h.assetsDPR,t,e,16711680).setOrigin(0,0),this.hitCircle=new Phaser.Geom.Circle(t,e,100),this.testCircle=this.game.add.graphics({x:0,y:0}),this.testCircle.lineStyle(5,16711680),this.testCircle.strokeCircleShape(this.hitCircle),this.testCircle.closePath(),this.testCircle.setAlpha(0)),this.heat++):this.isShooting?(this.isShooting=!1,this.line.setAlpha(0),this.testCircle.setAlpha(0),this.heat=0):this.heat=0}},{key:"isShooting",value:function(){return this.isShooting}},{key:"lockTarget",value:function(t,e,i){var s=null;void 0!==t&&Phaser.Geom.Circle.ContainsPoint(this.hitCircle,t.sprite)&&(s=t),void 0!==e&&Phaser.Geom.Circle.ContainsPoint(this.hitCircle,e.sprite)&&(s=e);for(var n=0;n<i.length;n++)if(Phaser.Geom.Circle.ContainsPoint(this.hitCircle,i[n].sprite)){s=i[n];break}return null!=s&&this.shoot(-1,-1),s}},{key:"victory",value:function(){this.line.setAlpha(0),this.testCircle.setAlpha(0)}}]),e}(u.default);e.default=l},1470:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),a=i(31),o=i(33),r=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(e){s(this,t),this.game=e,this.moving=!0,this.alive=!0,this.testLife=50,this.testDying=!1,this.sprite=new r.default(this.game,650,7,"bigBackground","mother/0"),this.sprite.on("animationcomplete",this.sheDead,this),this.game.tweens.add({targets:[this.sprite],duration:3e3,x:450*a.assetsDPR,callbackScope:this,onComplete:function(){this.moving=!1}});var i=this.game.anims.generateFrameNames("bigBackground",{start:1,end:12,prefix:"mother/"});this.game.anims.create({key:"deadMother",frames:i,frameRate:33});var n=this.game.add.graphics({x:0,y:0});n.lineStyle(5,8421504),n.strokeRect(620*a.assetsDPR,300*a.assetsDPR,40,240),n.closePath()}return n(t,[{key:"isMoving",value:function(){return this.moving}},{key:"getShot",value:function(){return this.testLife--,this.testLife<0&&this.die(),this.testLife}},{key:"die",value:function(){this.testDying||(this.alive=!1,this.sprite.anims.play("deadMother"),this.testDying=!0)}},{key:"isAlive",value:function(){return this.alive}},{key:"sheDead",value:function(t,e){this.sprite.setAlpha(0)}}]),t}();e.default=u},1471:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),a=i(31),o=i(33),r=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(e){s(this,t),this.game=e;var i=this.game.anims.generateFrameNames("bigBackground",{start:1,end:8,prefix:"fighter/fighter"});this.game.anims.create({key:"deadFighter",frames:i,frameRate:20}),this.alive=!0,this.testLife=50,this.testDying=!1,this.moving=!0,this.sprite=new r.default(this.game,480,40,"bigBackground","fighter/fighter0"),this.sprite.on("animationcomplete",this.itDead,this),this.game.tweens.add({targets:[this.sprite],duration:1e3,x:500*a.assetsDPR,y:80*a.assetsDPR,callbackScope:this,onComplete:function(){this.moving=!1}})}return n(t,[{key:"isMoving",value:function(){return this.moving}},{key:"isAlive",value:function(){return this.alive}},{key:"getShot",value:function(){return this.testLife--,this.testLife<0&&this.die(),this.testLife}},{key:"die",value:function(){this.testDying||(this.alive=!1,this.sprite.anims.play("deadFighter"),this.testDying=!0)}},{key:"itDead",value:function(t,e){this.sprite.setAlpha(0)}}]),t}();e.default=u},1472:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),a=i(31),o=i(33),r=function(t){return t&&t.__esModule?t:{default:t}}(o),u=function(){function t(e,i,n,o,r){s(this,t),this.game=e,this.camera=r,this.moving=!0,this.status=0,this.shields=i,this.block=this.shields.getBlock(),this.homeBlock=n,this.testBombCount=o,this.sprite=this.game.physics.add.sprite(500*a.assetsDPR,80*a.assetsDPR,"bigBackground","bomb/0",0),this.sprite.setAcceleration(25,800),this.sprite.setCollideWorldBounds(!0),this.block&&this.game.physics.add.overlap(this.sprite,this.block,this.absorbed,null,this),this.game.physics.add.overlap(this.sprite,this.homeBlock,this.boom,null,this),this.game.physics.add.overlap(this.sprite,this.hitRect,this.absorbed,null,this)}return n(t,[{key:"isMoving",value:function(){return this.moving}},{key:"getShot",value:function(){this.status=1,this.sprite.disableBody(!0,!0),this.destroy(this.sprite)}},{key:"absorbed",value:function(t,e){this.camera.shake(50,.02),t.disableBody(!0,!0),this.destroy(t)}},{key:"boom",value:function(t,e){t.disableBody(!0,!0),this.status=2;var i={x:t.x,y:t.y};this.winSprite=new r.default(this.game,i.x/a.assetsDPR,i.y/a.assetsDPR,"bigBackground","bomb/0")}},{key:"destroy",value:function(t){var e={x:t.x,y:t.y};t.disableBody(!0,!0),this.deadSprite=new r.default(this.game,e.x/a.assetsDPR,e.y/a.assetsDPR,"bigBackground","bomb/0"),this.deadSprite.on("animationcomplete",function(){this.deadSprite.setAlpha(0),this.status<1&&this.shields.hit(),this.status=1},this);var i=this.game.anims.generateFrameNames("bigBackground",{start:0,end:4,prefix:"deadBomb/"});this.game.anims.create({key:"bombOut",frames:i,frameRate:12}),this.deadSprite.play("bombOut")}}]),t}();e.default=u},1473:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.TestScene=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),u=(i(31),i(33)),h=(s(u),i(83)),l=s(h),f=i(540),c=s(f),p=i(538),d=s(p);e.TestScene=function(t){function e(){n(this,e);var t=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"TestScene"));return console.log("SHALL WE PLAY A GAME?"),t}return o(e,t),r(e,[{key:"create",value:function(){this.testBot=new c.default(this,1,0,!1),this.testBot.path=16,this.testBot.state=8,this.testBot.step=0,this.testBot.initStep(),this.gameTime=60,this.startTime=Date.now(),this.input.keyboard.on("keyup",this.handleKey,this),this.loopCount=0,this.add.text(50,150,"Test runs for 10 seconds",{font:"72px Arial",fill:"#ffffff",align:"left"}),this.gameTimeText=this.add.text(50,220,"Seconds:"+this.currentGameTime,{font:"72px Arial",fill:"#ffffff",align:"left"}),this.testLoops=this.add.text(450,220,"Loops:",{font:"72px Arial",fill:"#ffffff",align:"left"});var t={x:0,y:0},e=new Phaser.Geom.Point(t.x,t.y);this.man=new d.default(this,e)}},{key:"update",value:function(t,e){if(!(i>-12)){this.loopCount++;var i=Math.floor((this.gameTime-(Date.now()-this.startTime))/1e3);i>-11?(this.gameTimeText.text="Seconds "+-1*i,this.testBot.act(null,this.loopCount,e,this.testLoops)):this.add.text(50,290,"End: "+this.testBot.sprite.x+","+this.testBot.sprite.y,{font:"72px Arial",fill:"#ffffff",align:"left"}),this.man.isMoving()?(console.log("HE MOVES!"),this.man.doMove(this.loopCount,e)):this.man.getBuffer()>-1&&(this.makeMove(this.man.getBuffer()),this.man.clearBuffer())}}},{key:"makeMove",value:function(t){this.man.moveBuffer>-1&&this.man.tryMove()}},{key:"handleKey",value:function(t){switch(t.code){case"KeyA":case"ArrowLeft":this.man.setBuffer(l.default.LEFT);break;case"KeyD":case"ArrowRight":this.man.setBuffer(l.default.RIGHT);break;case"KeyW":case"ArrowUp":this.man.setBuffer(l.default.UP);break;case"KeyS":case"ArrowDown":this.man.setBuffer(l.default.DOWN)}}}]),e}(Phaser.Scene)},261:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),u=i(539),h=s(u),l=i(33),f=s(l),c=i(62),p=function(t){function e(t,i,s){n(this,e);var o=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,s));return o.fuelStoreSprite="fuelStore/fuel",o.fuelBay=[10,10,10],o.fuelSprite=[],o.fuelSprite[0]=new f.default(o.game,(0,c.getLocationX)(o.spot)+25,(0,c.getLocationY)(o.spot)+30,"bigBackground","fuelStore/fuel"+o.fuelBay[0]).setOrigin(0,0),o.fuelSprite[1]=new f.default(o.game,(0,c.getLocationX)(o.spot)+4,(0,c.getLocationY)(o.spot)+30,"bigBackground","fuelStore/fuel"+o.fuelBay[1]).setOrigin(0,0),o.fuelSprite[2]=new f.default(o.game,(0,c.getLocationX)(o.spot)+46,(0,c.getLocationY)(o.spot)+30,"bigBackground","fuelStore/fuel"+o.fuelBay[2]).setOrigin(0,0),o.upgrades=1,"base"!=i&&o.drawUpgrades(),o}return o(e,t),r(e,[{key:"drawFuelBays",value:function(){for(var t=0;t<3;t++)this.fuelSprite[t].setFrame(this.fuelStoreSprite+this.fuelBay[t]).setOrigin(0,0)}},{key:"drawUpgrades",value:function(){this.upgradeSprite=new f.default(this.game,(0,c.getLocationX)(this.spot),(0,c.getLocationY)(this.spot),"bigBackground","upgrades/1").setOrigin(0,0)}},{key:"upgrade",value:function(){this.upgrades++,this.upgradeSprite.setFrame("upgrades/"+this.upgrades).setOrigin(0,0)}},{key:"interact",value:function(t){if(t.hasGas()&&this.upgrades<10)this.upgrade(),t.nowHasNothing();else if(t.hasNothing()){var e=this.fuelBay.findIndex(function(t){return 10==t});0<=e&&(this.fuelBay[e]=0,this.drawFuelBays(),t.nowHasThing())}else if(t.hasThing()){var i=this.fuelBay.findIndex(function(t){return 0==t});0<=i&&(this.fuelBay[i]=10,this.drawFuelBays(),t.nowHasNothing())}}}]),e}(h.default);e.default=p},31:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assetsDPR=e.HEIGHT=e.WIDTH=void 0,i(262);var s=i(1461),n=i(1462),a=i(1473),o=e.WIDTH=2560,r=e.HEIGHT=1920,u=e.assetsDPR=function(t){return Math.round(2*t)/2}(Math.min(Math.max(r/480,1),4));console.log("DPR = ",4),console.log("assetsDPR = ",u),console.log("WIDTH = ",o),console.log("HEIGHT = ",r);var h={backgroundColor:0,type:Phaser.WebGL,scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:o,height:r,fps:60},pixelArt:!0,physics:{default:"arcade",arcade:{gravity:{y:15},debug:!1}},scene:[s.BootGame,n.PlayGame,a.TestScene]};window.addEventListener("load",function(){new Phaser.Game(h)})},33:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r=function t(e,i,s){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,s)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(s)},u=i(31),h=function(t){function e(t,i,a,o,r){s(this,e);var h=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i*u.assetsDPR,a*u.assetsDPR,o,r));return t.add.existing(h),h}return a(e,t),o(e,[{key:"setX",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setX",this).call(this,Math.round(t*u.assetsDPR))}},{key:"setY",value:function(t){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setY",this).call(this,Math.round(t*u.assetsDPR))}}]),e}(Phaser.GameObjects.Sprite);e.default=h},538:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=i(83),r=s(o),u=i(31),h=i(62),l=i(33),f=s(l),c=function(){function t(e,i){n(this,t),this.game=e,this.location=i,this.moving=!1,this.moveBuffer=-1,this.carrying=r.default.NOTHING,this.sprite=new f.default(this.game,(0,h.getMapCoords)(i).x+18,(0,h.getMapCoords)(i).y+72,"bigBackground","flatman/man0empty").setOrigin(0,0),this.speed=Phaser.Math.GetSpeed(500,1),this.stepPx=new Phaser.Geom.Point(0,0),this.vector=new Phaser.Geom.Point(0,0)}return a(t,[{key:"isMoving",value:function(){return this.moving}},{key:"setBuffer",value:function(t){this.moveBuffer=t}},{key:"getBuffer",value:function(){return this.moveBuffer}},{key:"clearBuffer",value:function(){this.moveBuffer=-1}},{key:"getLocation",value:function(){return this.location}},{key:"isCarrying",value:function(){return this.carrying}},{key:"hasNothing",value:function(){return this.carrying==r.default.NOTHING}},{key:"hasThing",value:function(){return this.carrying==r.default.THING}},{key:"hasGas",value:function(){return this.carrying==r.default.GAS}},{key:"nowHasThing",value:function(){this.carrying=r.default.THING,this.sprite.setFrame("flatman/man1thing").setOrigin(0,0)}},{key:"nowHasNothing",value:function(){this.carrying=r.default.NOTHING,this.sprite.setFrame("flatman/man0empty").setOrigin(0,0)}},{key:"isNowCarrying",value:function(t){switch(this.carrying=t,this.carrying){case r.default.NOTHING:this.sprite.setFrame("flatman/man0empty").setOrigin(0,0);break;case r.default.THING:this.sprite.setFrame("flatman/man1thing").setOrigin(0,0);break;case r.default.GAS:this.sprite.setFrame("flatman/man2gas").setOrigin(0,0)}}},{key:"tryMove",value:function(){var t=this.location.x,e=this.location.y,i=(0,h.getSpotAtLocation)(this.location);switch(this.moveBuffer){case r.default.LEFT:this.location.x--;break;case r.default.RIGHT:this.location.x++;break;case r.default.UP:this.location.y--,null!==i&&(this.location.y=-1);break;case r.default.DOWN:this.location.y++,null!==i&&(this.location.y=-1);break;default:throw"impossible man! "+this.moveBuffer}var s=(0,h.getMapCoords)(this.location);if(!s)return this.location.x=t,void(this.location.y=e);this.moving=!0,this.vector.x=0,this.vector.y=0,this.stepPx.x=(s.x+18)*u.assetsDPR,this.stepPx.y=(s.y+72)*u.assetsDPR,this.sprite.x<this.stepPx.x&&(this.vector.x=1),this.sprite.x>this.stepPx.x&&(this.vector.x=-1),this.sprite.y<this.stepPx.y&&(this.vector.y=1),this.sprite.y>this.stepPx.y&&(this.vector.y=-1)}},{key:"doMove",value:function(t,e){this.vector.x>0&&this.sprite.x<this.stepPx.x||this.vector.x<0&&this.sprite.x>this.stepPx.x||this.vector.y>0&&this.sprite.y<this.stepPx.y||this.vector.y<0&&this.sprite.y>this.stepPx.y?(this.sprite.x+=this.speed*e*this.vector.x,this.sprite.y+=this.speed*e*this.vector.y):(this.sprite.x=this.stepPx.x,this.sprite.y=this.stepPx.y,this.moving=!1)}}]),t}();e.default=c},539:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=i(62),a=i(33),o=function(t){return t&&t.__esModule?t:{default:t}}(a),r=function t(e,i,a){s(this,t),this.game=e,this.spot=a,this.spriteName=i,this.sprite=new o.default(this.game,(0,n.getLocationX)(this.spot),(0,n.getLocationY)(this.spot),"bigBackground",i).setOrigin(0,0)};e.default=r},540:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=i(83),r=s(o),u=i(31),h=i(62),l=i(33),f=s(l),c=0,p=0,d=[[[0,0],[1,0],[1,1],[2,1]],[[2,0],[3,0],[3,1],[2,1]],[[4,0],[3,0],[3,1],[2,1]],[[0,1],[1,1],[2,1]],[[2,1]],[[4,1],[3,1],[2,1]],[[0,2],[1,2],[1,1],[2,1]],[[2,2],[3,2],[3,1],[2,1]],[[4,2],[3,2],[2,2],[2,1]],[[6,3],[5,3],[5,2],[5,1],[4,1],[3,1],[2,1]],[[7,3],[6,3],[5,3],[5,2],[5,1],[4,1],[3,1],[2,1]],[[8,3],[7,3],[6,3],[5,3],[5,2],[5,1],[4,1],[3,1],[2,1]],[[2,1],[1,1],[2,1]],[[2,1],[3,1],[2,1]],[[8,3],[7,3],[6,3]],[[0,2],[1,2],[2,2],[3,2],[4,2],[5,2]],[[1,0],[5,0]],[[1,0],[1,2],[5,2],[5,0],[1,0]]],g=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,t),this.game=e,this.state=p,this.path=0,this.step=0,this.dir=1,this.moving=!1,this.location=new Phaser.Geom.Point(i,s),this.carrying=c;var a=(0,h.getMapCoords)(this.location);this.sprite=new f.default(this.game,a.x+18,a.y+72,"bigBackground","flatbot/bot0empty").setOrigin(0,0),this.nextStep=new Phaser.Geom.Point(0,1),this.speed=Phaser.Math.GetSpeed(500,1),this.stepPx=new Phaser.Geom.Point(0,0),this.vector=new Phaser.Geom.Point(0,0),this.testLoopCount=0}return a(t,[{key:"initStep",value:function(){this.nextStep.x=d[this.path][this.step][0],this.nextStep.y=d[this.path][this.step][1];var t=(0,h.getMapCoords)(this.nextStep);this.stepPx.x=(t.x+18)*u.assetsDPR,this.stepPx.y=(t.y+72)*u.assetsDPR}},{key:"act",value:function(t,e,i,s){var n={affected:-1,affect:-1};if(this.moving)return this.vector.x>0&&this.sprite.x<this.stepPx.x||this.vector.x<0&&this.sprite.x>this.stepPx.x||this.vector.y>0&&this.sprite.y<this.stepPx.y||this.vector.y<0&&this.sprite.y>this.stepPx.y?(this.sprite.x+=this.speed*i*this.vector.x,this.sprite.y+=this.speed*i*this.vector.y):(this.sprite.x=this.stepPx.x,this.sprite.y=this.stepPx.y,this.moving=!1),n;if(!this.moving)switch(this.state){case 6:this.location=new Phaser.Geom.Point(4,2),this.sprite.setFrame("flatbot/bot0empty").setOrigin(0,0),this.sprite.setAlpha(1),this.path=this.target,this.step=3,this.dir=-1,this.carrying=c,this.state=7,n.affected=4,n.affect=r.default.DO_DISPATCH;break;case p:case 5:case 7:case 8:if(void 0!==d[this.path][this.step+this.dir]){this.moving=!0,this.nextStep.x=d[this.path][this.step+this.dir][0],this.nextStep.y=d[this.path][this.step+this.dir][1];var a=(0,h.getMapCoords)(this.nextStep);this.vector.x=0,this.vector.y=0,this.stepPx.x=(a.x+18)*u.assetsDPR,this.stepPx.y=(a.y+72)*u.assetsDPR,this.sprite.x<this.stepPx.x&&(this.vector.x=1),this.sprite.x>this.stepPx.x&&(this.vector.x=-1),this.sprite.y<this.stepPx.y&&(this.vector.y=1),this.sprite.y>this.stepPx.y&&(this.vector.y=-1),this.step+=this.dir}else 8==this.state?(s.text="Loops "+ ++this.testLoopCount,this.dir*=-1):7==this.state?(this.state=p,this.carrying=1,this.sprite.setFrame("flatbot/bot1thing").setOrigin(0,0),this.dir=1,n.affected=this.target,n.affect=r.default.DO_TAKESTUFF):1==this.carrying?10==t[4].fuelBay[0]&&10==t[4].fuelBay[1]&&10==t[4].fuelBay[2]?(this.state=5,13==this.path?this.path=12:this.path=13,this.step=0,this.dir=1):(this.state=1,this.sprite.setAlpha(0),n.affected=4,n.affect=r.default.DO_PUTSTUFF):(this.state=1,this.sprite.setAlpha(0),n.affected=4,n.affect=r.default.DO_RESTBOT)}return n}},{key:"isResting",value:function(){return 1==this.state}},{key:"getThing",value:function(t){this.state=6,this.target=t}}]),t}();e.default=g},62:function(t,e,i){"use strict";function s(t){var e=0;return 0!=t&&3!=t&&6!=t||(e=7),1!=t&&4!=t&&7!=t||(e=111),2!=t&&5!=t&&8!=t||(e=214),9==t&&(e=318),10==t&&(e=432),11==t&&(e=546),e}function n(t){var e=0;return 0!=t&&1!=t&&2!=t||(e=7),3!=t&&4!=t&&5!=t||(e=113),6!=t&&7!=t&&8!=t||(e=218),9!=t&&10!=t&&11!=t||(e=368),e}function a(t){try{return t.x<0||t.y<0?null:p[t.y][t.x][0]<0?null:p[t.y][t.x][1]<0?null:new Phaser.Geom.Point(p[t.y][t.x][0],p[t.y][t.x][1])}catch(t){return null}}function o(t){return void 0===p[t.y][t.x][2]?null:p[t.y][t.x][2]}function r(t,e,i){0==g?(l=e,f=i,c=t,u()):h()}function u(){var t=c.add.graphics({x:0,y:0});t.clear(),t.beginPath(),t.setDepth(y),b?(b=!1,t.fillStyle(16711680,1-g/20)):(b=!0,t.fillStyle(16777215,1-g/20)),t.fillCircle(l,f,15*(200-y)),g=1}function h(){if(!(g>100)&&(d++,g++,d>2)){d=0;var t=c.add.graphics({x:0,y:0});y--;var e=1*(1-g/100);t.clear(),t.beginPath(),t.setDepth(y),b?(b=!1,t.fillStyle(16711680,e)):(b=!0,t.fillStyle(16777215,e)),t.fillCircle(l,f,25*(200-y)*g/50),t.closePath()}}Object.defineProperty(e,"__esModule",{value:!0});var l,f,c,p=[[[7,6,0],[59,6],[111,6,1],[163,6],[214,6,2],[266,6]],[[7,111.5,3],[59,111.5],[111,111.5,4],[163,111.5],[214,111.5,5],[266,111.5]],[[7,217,6],[59,217],[111,217,7],[163,217],[214,217,8],[266,217]],[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[266,366],[318,366,9],[431,366,10],[546,366,11]]],d=0,g=0,y=200,b=!0;e.getLocationX=s,e.getLocationY=n,e.getMapCoords=a,e.getSpotAtLocation=o,e.deathCrater=r},83:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={LEFT:0,RIGHT:1,UP:2,DOWN:3,INTERACT:4,NOTHING:0,THING:1,GAS:2,DO_RESTBOT:1,DO_TAKESTUFF:2,DO_UPGRADE:3,DO_PUTSTUFF:4,DO_DISPATCH:5,swipeMaxTime:1e3,swipeMinDistance:20,swipeMinNormal:.85};e.default=s}},[31]);